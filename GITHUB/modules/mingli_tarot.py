#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
å¡”ç¾…ç‰Œåˆ†æç³»çµ±
"""

import random
from datetime import datetime

class TarotAnalyzer:
    def __init__(self):
        self.major_arcana = {
            0: ("æ„šè€… The Fool", "æ–°é–‹å§‹ã€ç´”çœŸã€è‡ªç™¼æ€§ã€è‡ªç”±ç²¾ç¥"),
            1: ("é­”è¡“å¸« The Magician", "é¡¯åŒ–ã€è³‡æºã€åŠ›é‡ã€æ¿€å‹µè¡Œå‹•"),
            2: ("å¥³ç¥­å¸ The High Priestess", "ç›´è¦ºã€ç¥è–çŸ¥è­˜ã€æ½›æ„è­˜ã€å…§åœ¨è²éŸ³"),
            3: ("çš‡å The Empress", "è±é¥’ã€é¤Šè‚²ã€è±ç››ã€è‡ªç„¶"),
            4: ("çš‡å¸ The Emperor", "æ¬Šå¨ã€å»ºç«‹ã€çµæ§‹ã€çˆ¶è¦ªå½¢è±¡"),
            5: ("æ•™çš‡ The Hierophant", "éˆæ€§æ™ºæ…§ã€å®—æ•™ä¿¡ä»°ã€é †å¾ã€å‚³çµ±"),
            6: ("æˆ€äºº The Lovers", "æ„›ã€å’Œè«§ã€é—œä¿‚ã€åƒ¹å€¼è§€"),
            7: ("æˆ°è»Š The Chariot", "æ§åˆ¶ã€æ„å¿—åŠ›ã€æ±ºå¿ƒã€è¡Œå‹•"),
            8: ("åŠ›é‡ Strength", "åŠ›é‡ã€å‹‡æ°£ã€èªªæœã€å½±éŸ¿åŠ›"),
            9: ("éš±è€… The Hermit", "éˆé­‚æ¢ç´¢ã€å…§çœã€å­¤ç¨ã€æŒ‡å¼•"),
            10: ("å‘½é‹ä¹‹è¼ª Wheel of Fortune", "å¥½é‹ã€æ¥­åŠ›ã€ç”Ÿå‘½é€±æœŸã€å‘½é‹"),
            11: ("æ­£ç¾© Justice", "æ­£ç¾©ã€å…¬å¹³ã€çœŸç†ã€å› æœ"),
            12: ("åŠäºº The Hanged Man", "æš«åœã€æ”¾æ‰‹ã€çŠ§ç‰²ã€æ–°è§€é»"),
            13: ("æ­»ç¥ Death", "çµæŸã€æ”¹è®Šã€è½‰è®Šã€éæ¸¡"),
            14: ("ç¯€åˆ¶ Temperance", "å¹³è¡¡ã€ç¯€åˆ¶ã€è€å¿ƒã€ç›®çš„"),
            15: ("æƒ¡é­” The Devil", "æŸç¸›ã€æˆç™®ã€é™åˆ¶ã€æ€§"),
            16: ("é«˜å¡” The Tower", "çªç„¶æ”¹è®Šã€å‹•ç›ªã€æ··äº‚ã€å•Ÿç¤º"),
            17: ("æ˜Ÿæ˜Ÿ The Star", "å¸Œæœ›ã€ä¿¡å¿µã€ç›®çš„ã€æ›´æ–°"),
            18: ("æœˆäº® The Moon", "å¹»è¦ºã€ææ‡¼ã€ç„¦æ…®ã€æ½›æ„è­˜"),
            19: ("å¤ªé™½ The Sun", "ç©æ¥µã€æ¨‚è¶£ã€æº«æš–ã€æˆåŠŸ"),
            20: ("å¯©åˆ¤ Judgement", "åˆ¤æ–·ã€é‡ç”Ÿã€å…§åœ¨å‘¼å–šã€èµ¦å…"),
            21: ("ä¸–ç•Œ The World", "å®Œæˆã€æ•´åˆã€æˆå°±ã€æ—…è¡Œ")
        }
    
    def draw_cards(self, birth_date, question="æ•´é«”é‹å‹¢"):
        """
        æ ¹æ“šå‡ºç”Ÿæ—¥æœŸæŠ½å–å¡”ç¾…ç‰Œ
        ä½¿ç”¨å‡ºç”Ÿæ—¥æœŸä½œç‚ºéš¨æ©Ÿç¨®å­ï¼Œç¢ºä¿çµæœä¸€è‡´æ€§
        """
        # ä½¿ç”¨å‡ºç”Ÿæ—¥æœŸä½œç‚ºç¨®å­
        seed = int(birth_date.replace("-", ""))
        random.seed(seed)
        
        # æŠ½å–ä¸‰å¼µç‰Œï¼šéå»ã€ç¾åœ¨ã€æœªä¾†
        cards = random.sample(list(self.major_arcana.keys()), 3)
        
        result = f"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ´ å¡”ç¾…ç‰Œå åœåˆ†æ ğŸ´                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… å‡ºç”Ÿæ—¥æœŸï¼š{birth_date}
ğŸ”® å åœä¸»é¡Œï¼š{question}
â° å åœæ™‚é–“ï¼š{datetime.now().strftime('%Y-%m-%d %H:%M')}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€ä¸‰ç‰Œé™£ã€‘

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éå»ä½ç½®ï¼ˆPastï¼‰                                          â”‚
â”‚  {self.major_arcana[cards[0]][0]:^50}  â”‚
â”‚  {self.major_arcana[cards[0]][1]:^50}  â”‚
â”‚                                                             â”‚
â”‚  è§£è®€ï¼šé€™å¼µç‰Œä»£è¡¨éå»çš„å½±éŸ¿å’Œå·²ç¶“ç™¼ç”Ÿçš„äº‹æƒ…ã€‚               â”‚
â”‚  {self._interpret_card(cards[0], 'past'):^50}  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¾åœ¨ä½ç½®ï¼ˆPresentï¼‰                                       â”‚
â”‚  {self.major_arcana[cards[1]][0]:^50}  â”‚
â”‚  {self.major_arcana[cards[1]][1]:^50}  â”‚
â”‚                                                             â”‚
â”‚  è§£è®€ï¼šé€™å¼µç‰Œä»£è¡¨ç•¶å‰çš„ç‹€æ³å’Œé¢è‡¨çš„æŒ‘æˆ°ã€‚                   â”‚
â”‚  {self._interpret_card(cards[1], 'present'):^50}  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœªä¾†ä½ç½®ï¼ˆFutureï¼‰                                        â”‚
â”‚  {self.major_arcana[cards[2]][0]:^50}  â”‚
â”‚  {self.major_arcana[cards[2]][1]:^50}  â”‚
â”‚                                                             â”‚
â”‚  è§£è®€ï¼šé€™å¼µç‰ŒæŒ‡ç¤ºæœªä¾†çš„ç™¼å±•è¶¨å‹¢ã€‚                           â”‚
â”‚  {self._interpret_card(cards[2], 'future'):^50}  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€æ•´é«”è§£è®€ã€‘

{self._overall_interpretation(cards)}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¡ å»ºè­°ï¼š
{self._get_advice(cards)}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
"""
        return result
    
    def _interpret_card(self, card_num, position):
        """è§£é‡‹ç‰Œæ„"""
        interpretations = {
            0: {"past": "éå»ä¿æŒè‘—ç´”çœŸå’Œè‡ªç”±çš„æ…‹åº¦", "present": "æ­£è™•æ–¼æ–°çš„é–‹å§‹éšæ®µ", "future": "å°‡è¿ä¾†æ–°çš„å†’éšª"},
            1: {"past": "æ›¾ç¶“é‹ç”¨æ™ºæ…§å‰µé€ æ©Ÿæœƒ", "present": "æ“æœ‰å¯¦ç¾ç›®æ¨™çš„è³‡æº", "future": "å°‡é¡¯åŒ–ä½ çš„é¡˜æœ›"},
            2: {"past": "ä¾é ç›´è¦ºåšå‡ºæ±ºå®š", "present": "éœ€è¦å‚¾è½å…§åœ¨è²éŸ³", "future": "æ™ºæ…§å°‡æœƒé¡¯ç¾"},
            3: {"past": "ç¶“æ­·è±ç››çš„æ™‚æœŸ", "present": "æ­£åœ¨å­•è‚²æ–°äº‹ç‰©", "future": "å°‡æ”¶ç©«è±ç¢©æˆæœ"},
            4: {"past": "å»ºç«‹äº†ç©©å›ºçš„åŸºç¤", "present": "éœ€è¦çµæ§‹å’Œç´€å¾‹", "future": "å°‡æŒæ¡æ¬Šå¨åœ°ä½"},
            5: {"past": "éµå¾ªå‚³çµ±åƒ¹å€¼è§€", "present": "å°‹æ±‚éˆæ€§æŒ‡å¼•", "future": "å°‡ç²å¾—æ™ºæ…§å•Ÿè¿ª"},
            6: {"past": "åšå‡ºé‡è¦é¸æ“‡", "present": "é¢è‡¨é—œä¿‚æ±ºç­–", "future": "æ„›èˆ‡å’Œè«§å°‡è‡³"},
            7: {"past": "å±•ç¾å¼·å¤§æ„å¿—åŠ›", "present": "éœ€è¦æ§åˆ¶å±€é¢", "future": "å°‡å–å¾—å‹åˆ©"},
            8: {"past": "å…‹æœäº†å›°é›£", "present": "å±•ç¾å…§åœ¨åŠ›é‡", "future": "å°‡æ›´åŠ å¼·å¤§"},
            9: {"past": "ç¶“æ­·å…§çœæ™‚æœŸ", "present": "éœ€è¦ç¨è™•æ€è€ƒ", "future": "å°‡ç²å¾—æ™ºæ…§"},
            10: {"past": "ç¶“æ­·å‘½é‹è½‰æŠ˜", "present": "æ©Ÿæœƒä¾†è‡¨", "future": "å¥½é‹å°‡è‡³"},
            11: {"past": "é¢å°å…¬æ­£å¯©åˆ¤", "present": "å°‹æ±‚å¹³è¡¡", "future": "æ­£ç¾©å°‡å¾—ä¼¸å¼µ"},
            12: {"past": "ç¶“æ­·çŠ§ç‰²", "present": "éœ€è¦æ›å€‹è§’åº¦", "future": "å°‡ç²å¾—æ–°è¦–é‡"},
            13: {"past": "ç¶“æ­·é‡å¤§è½‰è®Š", "present": "é¢è‡¨çµæŸèˆ‡é–‹å§‹", "future": "å°‡è¿ä¾†æ–°ç”Ÿ"},
            14: {"past": "ä¿æŒå¹³è¡¡", "present": "éœ€è¦è€å¿ƒ", "future": "å°‡é”æˆå’Œè«§"},
            15: {"past": "å—åˆ°æŸç¸›", "present": "éœ€è¦è§£æ”¾è‡ªå·±", "future": "å°‡ç²å¾—è‡ªç”±"},
            16: {"past": "ç¶“æ­·å·¨è®Š", "present": "é¢è‡¨çªç ´", "future": "å°‡é‡å»ºåŸºç¤"},
            17: {"past": "å……æ»¿å¸Œæœ›", "present": "ä¿æŒä¿¡å¿µ", "future": "å¤¢æƒ³å°‡å¯¦ç¾"},
            18: {"past": "é¢å°ææ‡¼", "present": "éœ€è¦ç›´è¦–å…§å¿ƒ", "future": "å°‡çœ‹æ¸…çœŸç›¸"},
            19: {"past": "äº«å—æˆåŠŸ", "present": "å……æ»¿æ´»åŠ›", "future": "å°‡å…‰æ˜ç‡¦çˆ›"},
            20: {"past": "ç¶“æ­·è¦ºé†’", "present": "é¢è‡¨å¯©åˆ¤", "future": "å°‡ç²å¾—é‡ç”Ÿ"},
            21: {"past": "å®Œæˆé‡è¦éšæ®µ", "present": "æ¥è¿‘ç›®æ¨™", "future": "å°‡åœ“æ»¿æˆåŠŸ"}
        }
        return interpretations.get(card_num, {}).get(position, "éœ€è¦æ·±å…¥æ€è€ƒ")
    
    def _overall_interpretation(self, cards):
        """æ•´é«”è§£è®€"""
        past_card = self.major_arcana[cards[0]][0]
        present_card = self.major_arcana[cards[1]][0]
        future_card = self.major_arcana[cards[2]][0]
        
        return f"""å¾æ•´é«”ä¾†çœ‹ï¼Œä½ çš„ç”Ÿå‘½æ—…ç¨‹å‘ˆç¾å‡ºæ¸…æ™°çš„è„ˆçµ¡ï¼š

éå»çš„ {past_card} ç‚ºä½ å¥ å®šäº†åŸºç¤ï¼Œå¸¶ä¾†äº†å¯¶è²´çš„ç¶“é©—å’Œæ•™è¨“ã€‚
é€™äº›ç¶“æ­·å¡‘é€ äº†ç¾åœ¨çš„ä½ ï¼Œè®“ä½ å…·å‚™äº†æ‡‰å°ç•¶ä¸‹æŒ‘æˆ°çš„èƒ½åŠ›ã€‚

ç›®å‰çš„ {present_card} é¡¯ç¤ºä½ æ­£è™•æ–¼é—œéµæ™‚æœŸï¼Œ
é€™æ˜¯ä¸€å€‹éœ€è¦ä½ åšå‡ºé¸æ“‡ã€æ¡å–è¡Œå‹•æˆ–æ˜¯æ·±å…¥æ€è€ƒçš„éšæ®µã€‚
æŠŠæ¡ç•¶ä¸‹ï¼Œç”¨å¿ƒæ„Ÿå—é€™å€‹æ™‚åˆ»å¸¶ä¾†çš„å•Ÿç¤ºã€‚

æœªä¾†çš„ {future_card} é ç¤ºè‘—ä½ å‰é€²çš„æ–¹å‘ï¼Œ
é€™æ˜¯ä½ çš„åŠªåŠ›å°‡è¦å¸¶ä¾†çš„çµæœï¼Œä¹Ÿæ˜¯å®‡å®™çµ¦ä½ çš„æŒ‡å¼•ã€‚
ä¿æŒé–‹æ”¾çš„å¿ƒæ…‹ï¼Œè¿æ¥å³å°‡åˆ°ä¾†çš„è®ŠåŒ–ã€‚"""
    
    def _get_advice(self, cards):
        """æä¾›å»ºè­°"""
        advice_map = {
            0: "ä¿æŒé–‹æ”¾å¿ƒæ…‹ï¼Œå‹‡æ•¢å˜—è©¦æ–°äº‹ç‰©",
            1: "å–„ç”¨ä½ çš„æ‰èƒ½å’Œè³‡æºï¼Œä¸»å‹•å‰µé€ æ©Ÿæœƒ",
            2: "ç›¸ä¿¡ä½ çš„ç›´è¦ºï¼Œå‚¾è½å…§åœ¨çš„è²éŸ³",
            3: "æ»‹é¤Šè‡ªå·±å’Œä»–äººï¼Œäº«å—ç”Ÿå‘½çš„è±ç››",
            4: "å»ºç«‹è¦å‰‡å’Œç§©åºï¼ŒæŒæ§ä½ çš„ç”Ÿæ´»",
            5: "å°Šé‡å‚³çµ±ï¼Œä½†ä¹Ÿè¦ä¿æŒç¨ç«‹æ€è€ƒ",
            6: "åšå‡ºç¬¦åˆå…§å¿ƒçš„é¸æ“‡ï¼Œçæƒœé—œä¿‚",
            7: "ä¿æŒå°ˆæ³¨å’Œæ±ºå¿ƒï¼Œå‹‡å¾€ç›´å‰",
            8: "ä»¥æº«æŸ”çš„åŠ›é‡é¢å°æŒ‘æˆ°",
            9: "çµ¦è‡ªå·±ç¨è™•çš„æ™‚é–“ï¼Œæ·±å…¥æ€è€ƒ",
            10: "æ¥å—è®ŠåŒ–ï¼Œé †æ‡‰ç”Ÿå‘½çš„ç¯€å¥",
            11: "å…¬æ­£å°å¾…è‡ªå·±å’Œä»–äººï¼Œæ‰¿æ“”è²¬ä»»",
            12: "æ›å€‹è§’åº¦çœ‹å•é¡Œï¼Œå­¸æœƒæ”¾æ‰‹",
            13: "æ¥å—çµæŸï¼Œè¿æ¥æ–°çš„é–‹å§‹",
            14: "ä¿æŒå¹³è¡¡ï¼Œé¿å…æ¥µç«¯",
            15: "è­˜åˆ¥ä¸¦æ‰“ç ´è‡ªæˆ‘é™åˆ¶",
            16: "æ¥å—å¿…è¦çš„æ”¹è®Šï¼Œé‡å»ºæ›´å¥½çš„åŸºç¤",
            17: "ä¿æŒå¸Œæœ›å’Œä¿¡å¿µï¼Œç›¸ä¿¡ç¾å¥½çš„æœªä¾†",
            18: "é¢å°ææ‡¼ï¼Œæ¢ç´¢æ½›æ„è­˜",
            19: "äº«å—ç•¶ä¸‹ï¼Œåˆ†äº«ä½ çš„å¿«æ¨‚",
            20: "å¯©è¦–éå»ï¼Œæº–å‚™å¥½è¿æ¥æ–°ç”Ÿ",
            21: "æ…¶ç¥æˆå°±ï¼Œæº–å‚™ä¸‹ä¸€å€‹æ—…ç¨‹"
        }
        
        advices = [advice_map.get(card, "é †å…¶è‡ªç„¶") for card in cards]
        return "\n".join([f"â€¢ {advice}" for advice in advices])


if __name__ == "__main__":
    analyzer = TarotAnalyzer()
    result = analyzer.draw_cards("1990-05-15", "æ•´é«”é‹å‹¢")
    print(result)
